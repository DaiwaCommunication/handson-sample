[
    {
        "id": "ffb7182e.9bb35",
        "type": "comment",
        "z": "1d0acc2a.5b396c",
        "name": "駅すぱあと範囲探索&slack投稿",
        "info": "",
        "x": 150,
        "y": 40,
        "wires": []
    },
    {
        "id": "a97c227b.fcf79",
        "type": "function",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "func": "var points = msg.payload.ResultSet.Point;\n\nif(!Array.isArray(points)){\n  points = [points];\n}\n\nvar displayStations = [];\n\nfor(var i = 0; i < points.length; i++) {\n  displayStations.push(\"・\" + points[i].Station.Name + \"駅 \" + points[i].Cost.Minute + \"分 乗換\" + points[i].Cost.TransferCount + \"回\");\n}\n\nvar newMsg = {\n  payload: displayStations.join(\"\\n\")\n};\nreturn newMsg;",
        "outputs": 1,
        "noerr": 0,
        "x": 410,
        "y": 240,
        "wires": [
            [
                "cd5e22f4.8b64f8"
            ]
        ]
    },
    {
        "id": "87d1bcf5.e02bc",
        "type": "slack",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "channelURL": "https://hooks.slack.com/services/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",
        "username": "",
        "emojiIcon": "",
        "channel": "",
        "x": 750,
        "y": 240,
        "wires": []
    },
    {
        "id": "7307858f.0a9fdc",
        "type": "debug",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 770,
        "y": 280,
        "wires": []
    },
    {
        "id": "a3c33e51.a821a",
        "type": "inject",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "repeat": "60",
        "crontab": "",
        "once": false,
        "x": 110,
        "y": 80,
        "wires": [
            [
                "19360c61.795874"
            ]
        ]
    },
    {
        "id": "10ed077.ccf08f9",
        "type": "switch",
        "z": "1d0acc2a.5b396c",
        "name": "湿度が◯◯度以上・以下だったら",
        "property": "humi",
        "propertyType": "global",
        "rules": [
            {
                "t": "lt",
                "v": "10",
                "vt": "num"
            },
            {
                "t": "gt",
                "v": "70",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 660,
        "y": 80,
        "wires": [
            [
                "ccdb6335.549db",
                "d93f8e7b.d2665"
            ],
            [
                "ccdb6335.549db",
                "d93f8e7b.d2665"
            ]
        ]
    },
    {
        "id": "f0f0f2e6.56d12",
        "type": "slack",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "channelURL": "https://hooks.slack.com/services/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",
        "username": "",
        "emojiIcon": "",
        "channel": "",
        "x": 930,
        "y": 160,
        "wires": []
    },
    {
        "id": "1c0ea8a1.26cd77",
        "type": "debug",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "false",
        "x": 950,
        "y": 200,
        "wires": []
    },
    {
        "id": "19360c61.795874",
        "type": "switch",
        "z": "1d0acc2a.5b396c",
        "name": "温度が◯◯度以上・以下だったら",
        "property": "temp",
        "propertyType": "global",
        "rules": [
            {
                "t": "lt",
                "v": "10",
                "vt": "num"
            },
            {
                "t": "gt",
                "v": "25",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "outputs": 2,
        "x": 340,
        "y": 80,
        "wires": [
            [
                "10ed077.ccf08f9"
            ],
            [
                "10ed077.ccf08f9"
            ]
        ]
    },
    {
        "id": "50a0fdf1.253bfc",
        "type": "search range",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "accessKey": "",
        "baseList": "",
        "upperMinute": "10",
        "upperTransferCount": "",
        "plane": "",
        "shinkansen": "",
        "limitedExpress": "",
        "limit": "",
        "x": 250,
        "y": 240,
        "wires": [
            [
                "a97c227b.fcf79",
                "f739744b.bfc28"
            ]
        ]
    },
    {
        "id": "f739744b.bfc28",
        "type": "debug",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "active": true,
        "console": "false",
        "complete": "payload",
        "x": 430,
        "y": 280,
        "wires": []
    },
    {
        "id": "ccdb6335.549db",
        "type": "function",
        "z": "1d0acc2a.5b396c",
        "name": "",
        "func": "var msg = {\n    baseList: context.global.stationName\n}\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 90,
        "y": 240,
        "wires": [
            [
                "50a0fdf1.253bfc"
            ]
        ]
    },
    {
        "id": "d93f8e7b.d2665",
        "type": "template",
        "z": "1d0acc2a.5b396c",
        "name": "Slack Message",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "部屋の環境がよろしくないみたい！\n温度：{{global.temp}}\n湿度：{{global.humi}}",
        "output": "str",
        "x": 760,
        "y": 160,
        "wires": [
            [
                "f0f0f2e6.56d12",
                "1c0ea8a1.26cd77"
            ]
        ]
    },
    {
        "id": "cd5e22f4.8b64f8",
        "type": "template",
        "z": "1d0acc2a.5b396c",
        "name": "Slack Message",
        "field": "payload",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "気分転換にお出かけでもどう？\n{{global.stationName}}から行ける駅を調べたよ!\n{{payload}}",
        "output": "str",
        "x": 580,
        "y": 240,
        "wires": [
            [
                "7307858f.0a9fdc",
                "87d1bcf5.e02bc"
            ]
        ]
    }
]
